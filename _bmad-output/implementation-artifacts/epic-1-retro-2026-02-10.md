# Rétrospective Epic 1 — Fondation, Authentification & Gestion des chantiers

**Date :** 2026-02-10
**Facilitateur :** Bob (Scrum Master)
**Participants :** Alice (PO), Bob (SM), Charlie (Senior Dev), Dana (QA), Elena (Junior Dev), Youssef (Project Lead)

---

## Résumé Epic 1

- **Stories :** 7/7 complétées (100%)
- **Tests :** 5 → 132 (croissance x26, 0 régressions)
- **Issues code review :** ~15 identifiées et corrigées
- **Dette technique :** 2 items mineurs

## Succès

- **Progression story-by-story naturelle** — chaque brique s'empile logiquement (scaffolding → auth → layout → data → realtime → lifecycle → PWA)
- **Discipline de tests exemplaire** — 132 tests, zéro régressions sur l'ensemble de l'epic
- **Code reviews approfondies** — ont attrapé des vrais problèmes (sécurité RLS, rollback incomplet)
- **Patterns fondateurs solides** — TanStack Query, optimistic mutations, Realtime subscriptions : devenus standards du projet
- **PWA installable** sur Android Chrome et iOS Safari dès la fin de l'epic
- **Documentation des leçons** dans MEMORY.md — capitalisation immédiate du savoir

## Difficultés

- **Types Supabase non documentés** — `Record<string, never>` casse l'inférence TypeScript, `Relationships: []` requis pour `.select('*')` avec supabase-js v2. Temps perdu en investigation.
- **Pattern optimiste itéré sur 3 stories** (1-4 → 1-5 → 1-6) avant d'atteindre la maturité (rollback multi-query via `getQueriesData`)
- **shadcn/ui nécessite une vérification systématique** — Sonner dépend de `next-themes`, Badge déclenche un lint warning, couleurs à aligner sur specs UX
- **Story 1-2 (auth) la plus lourde en corrections** — 6 issues high/medium en code review (RLS function manquante, router invalidation, login guard, act() warnings)

## Insights clés

1. Le séquençage progressif story-by-story est la bonne approche — validé par la pratique
2. L'apprentissage itératif sur les mutations optimistes était le bon chemin — la complexité augmentait réellement à chaque story
3. Les composants shadcn/ui copiés doivent être audités systématiquement après intégration
4. La documentation des gotchas dans MEMORY.md est un investissement qui paie immédiatement
5. Les fondations d'Epic 1 ont tenu pour Epic 2 — meilleure validation possible

## Actions

### Améliorations de processus
1. **Auditer systématiquement les composants shadcn/ui après copie** — Propriétaire : Dev (Amelia). Checklist dans chaque story utilisant un nouveau composant shadcn.
2. **Maintenir la documentation des gotchas dans MEMORY.md** — Propriétaire : Dev + SM. Chaque code review vérifie que les découvertes sont documentées.

### Dette technique
1. **Corriger le lint error dans `ThemeProvider.tsx:64`** — Priorité basse, cosmétique
2. **Mettre à jour les statuts d'epic dans `sprint-status.yaml`** — Priorité haute (fait lors de cette rétro)

### Accords d'équipe
- Les patterns TanStack Query établis en Epic 1 sont le **standard du projet**
- Les code reviews restent obligatoires, surtout pour les stories sécurité (auth, RLS)
- Le séquençage story-by-story progressif est validé comme approche à maintenir

## Évaluation de maturité

- **Tests & Qualité :** ✅ 132 tests, 0 régressions
- **Déploiement :** ✅ Production continue via Vercel + GitHub Actions
- **Stabilité technique :** ✅ Validée par Epic 2 qui s'appuie dessus sans friction
- **Bloqueurs non résolus :** Aucun (hors lint cosmétique)

## Validation Epic suivante

Les fondations d'Epic 1 ont pleinement supporté Epic 2 (Configuration & Structure de chantier). Aucune découverte significative ne remet en question l'architecture ou les plans.
